#
#       i3
#       .dotfile
#       2018-07-17
#

# Sets modkey alt 
set $mod Mod1

# Font for window titles.
font pango:terminus 10

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# start a terminal
bindsym $mod+Return exec urxvt 
# for_window [class="urxvt"] floating enable

# kill focused window
bindsym $mod+Shift+q kill

# start rofi (program launcher)
bindsym $mod+d exec rofi -show run

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+h move left 50px
bindsym $mod+Shift+j move down 50px
bindsym $mod+Shift+k move up 50px
bindsym $mod+Shift+l move right 50px

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left 50px
bindsym $mod+Shift+Down move down 50px
bindsym $mod+Shift+Up move up 50px
bindsym $mod+Shift+Right move right 50px

# split in horizontal orientation
# bindsym $mod+h split h

# split in vertical orientation
bindsym $mod+v split toggle

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# sets workspaces
set $workspace1 "I"
set $workspace2 "II"
set $workspace3 "III"
set $workspace4 "IV"
set $workspace5 "V"
set $workspace6 "VI"
set $workspace7 "VII"
set $workspace8 "VIII"
set $workspace9 "IX"
set $workspace10 "X"

# switch to workspace
bindsym $mod+1 workspace $workspace1
bindsym $mod+2 workspace $workspace2
bindsym $mod+3 workspace $workspace3
bindsym $mod+4 workspace $workspace4
bindsym $mod+5 workspace $workspace5
bindsym $mod+6 workspace $workspace6
bindsym $mod+7 workspace $workspace7
bindsym $mod+8 workspace $workspace8
bindsym $mod+9 workspace $workspace9
bindsym $mod+0 workspace $workspace10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $workspace1
bindsym $mod+Shift+2 move container to workspace $workspace2
bindsym $mod+Shift+3 move container to workspace $workspace3
bindsym $mod+Shift+4 move container to workspace $workspace4
bindsym $mod+Shift+5 move container to workspace $workspace5
bindsym $mod+Shift+6 move container to workspace $workspace6
bindsym $mod+Shift+7 move container to workspace $workspace7
bindsym $mod+Shift+8 move container to workspace $workspace8
bindsym $mod+Shift+9 move container to workspace $workspace9
bindsym $mod+Shift+0 move container to workspace $workspace10

# startup executions
# exec --no-startup-id gnome-terminal $workspace1
# exec --no-startup-id chromium-browser $workspace2

# reload the configuration file
bindsym $mod+Shift+c reload

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart

# shutdown menu (not functional without systemd & rofi)
# bindsym $mod+Shift+e exec $HOME/.config/i3/scripts/shutdown_menu -c

# resize window (you can also use the mouse for that)
mode "resize" {
        bindsym h resize grow width 5 px or 5 ppt
        bindsym j resize shrink height 5 px or 5 ppt
        bindsym k resize grow height 5 px or 5 ppt
        bindsym l resize shrink width 5 px or 5 ppt
       
	bindsym Left resize grow width 5 px or 5 ppt
        bindsym Down resize shrink height 5 px or 5 ppt
        bindsym Up resize grow height 5 px or 5 ppt
        bindsym Right resize shrink width 5 px or 5 ppt
        bindsym Return mode "default"
	bindsym Excape mode "default"
}
bindsym $mod+r mode "resize" 
       
hide_edge_borders both

# Set colors from Xresources
# Change 'color7' and 'color2' to whatever colors you want i3 to use 
# from the generated scheme.
# NOTE: The '#f0f0f0' in the lines below is the color i3 will use if
# it fails to get colors from Xresources.
#set_from_resource $fg i3wm.color7 #f0f0f0
#set_from_resource $bg i3wm.color2 #f0f0f0
set $bordercolor #888989
set $urgentcolor #F2777A
set $grey        #8c8c8c
set $bg          #8c8c8c
set $fg          #8c8c8c
set $unfocused   #5c5e5d

# class                 border           backgr. text indicator child_border
client.focused          $bordercolor     $bg     $fg  $bordercolor       $bordercolor
client.focused_inactive $bordercolor     $bg     $fg  $unfocused         $unfocused
client.unfocused        $unfocused       $bg     $fg  $unfocused         $unfocused
client.urgent           $urgentcolor     $bg     $fg  $bordercolor       $bordercolor
# client.placeholder      $bordercolor     $bg     $fg  $bg       $bg
# client.background       $bg

# POLYBAR
#exec_always --no-startup-id $HOME/.config/polybar/i3launch.sh

# Locks the screen
bindsym $mod+Shift+x exec i3lock --color 475263

# Pulse Audio controls
#bindsym XF86AudioRaiseVolume exec "amixer -D pulse sset Master 5%+; notify-send 'volume++'"
#bindsym XF86AudioLowerVolume exec "amixer -D pulse sset Master 5%-; notify-send 'volume--'"
#bindsym XF86AudioMute exec "amixer -D pulse set Master 1+ toggle; notify-send 'sound muted/resumed'"
#bindsym XF86AudioPlay exec "/home/daniel/.config/i3/scripts/cplay; notify-send 'play/pause'"
#bindsym XF86AudioNext exec "cmus-remote -n;notify-send 'next song'"
#bindsym XF86AudioPrev exec "cmus-remote -r;notify-send 'previous song'"

# experimental audiocontrol
#bindsym XF86AudioLowerVolume exec --no-startup-id $HOME/scripts/volume_control.py down 5
#bindsym XF86AudioRaiseVolume exec --no-startup-id $HOME/scripts/volume_control.py up 5

# old pactl stuff, unused currently.
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume 0 +5% #increase sound volume
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume 0 -5% #decrease sound volume 
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute 0 toggle # mute sound

# Screen brightness controls with notification
bindsym XF86MonBrightnessUp exec "light -A 10; notify-send 'brightness up'" 
bindsym XF86MonBrightnessDown exec "light -U 10; notify-send 'brightness down'" 

# experimental screen brightness
#bindsym XF86MonBrightnessDown exec --no-startup-id ${HOME}/scripts/backlight.sh -dec 10
#bindsym XF86MonBrightnessUp exec --no-startup-id ${HOME}/scripts/backlight.sh -inc 10

# Touchpad controls 
exec_always --no-startup-id synclient VertEdgeScroll=0 HorizTwoFingerScroll=1 NaturalScrolling=1 VertScrollDelta=-120 HorizScrollDelta=-120 PalmDetect=1
# toggle touchpad
# bindsym XF86TouchpadToggle exec /some/path/toggletouchpad.sh

# old. Media player controls
#bindsym XF86AudioPlay exec playerctl play
#bindsym XF86AudioPause exec playerctl pause
#bindsym XF86AudioNext exec playerctl next
#bindsym XF86AudioPrev exec playerctl previous

# Startup
# exec_always --no-startup-id feh --bg-scale /home/daniel/.config/wall.png

# Screenshot 
bindsym Print exec scrot 'Cheese_%a-%d%b%y_%H.%M.png' -e 'viewnior ~/$f'

# Sets keyboard layout SE/US
bindsym $mod+n exec "setxkbmap se"
bindsym $mod+m exec "setxkbmap us"

# Compton
# exec_always compton --config ~/.config/compton.conf -b -c

# Gaps!
gaps inner 20
gaps outer 10

set $mode_gaps Toggle gaps: (1) on (2) off
bindsym $mod+g mode "$mode_gaps"
mode "$mode_gaps" {
    bindsym 1 mode "default", gaps inner all set 20, gaps outer all set 10
    bindsym 2 mode "default", gaps inner all set 1, gaps outer all set 1
    bindsym 3 mode "default", gaps inner all set 50, gaps outer all set 80
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Removes titlebar for gaps to work
for_window [class="^.*"] border pixel 2

# Manjaro stuff & autostart
exec --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec --no-startup-id nitrogen --restore; sleep 1; compton -b
exec --no-startup-id nm-applet
exec --no-startup-id xfce4-power-manager
exec --no-startup-id pamac-tray
exec --no-startup-id clipit
exec --no-startup-id xautolock -time 10 -locker blurlock
exec_always --no-startup-id ff-theme-util
exec_always --no-startup-id fix_xcursor

# i3bar
bar {
	i3bar_command i3bar
	status_command i3status
	position bottom

	bindsym button4 nop
	bindsym button5	nop
	
	strip_workspace_numbers yes

	colors {
		background #202A2E
		statusline #F9FAF9
		separator  #454947
	}
}

# Experimental stuff
bindsym $mod+y fullscreen disable; floating enable; resize set 600 400; sticky enable; move window to position 1940 20
bindsym $mod+t exec --no-startup-id thunar

# floating modes to prevent graphical glitches
for_window [window_role="pop-up"] floating enable
for_window [window_role="bubble"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [window_role="Preferences"] floating enable

for_window [window_type="dialog"] floating enable
for_window [window_type="menu"] floating enable

for_window [class="(?i)gsimplecal"] floating enable, move position mouse, move down $height px
for_window [class="(?i)qemu-system"] floating enable
for_window [class="(?i)VirtualBox" title="(?i)Manager"] floating enable
for_window [class="(?i)VirtualBox"] floating enable
for_window [class="(?i)blueman"] floating enable
for_window [class="(?i)pinentry"] floating enable
for_window [class="(?i)nm-connection-editor"] floating enable

for_window [instance="__scratchpad"] floating enable
for_window [instance="__nmtui"] floating enable
for_window [class="(?i)recordmydesktop"] floating enable

for_window [class="(?i)pavucontrol"] floating enable, move position mouse
for_window [class="(?i)pavucontrol" instance="pavucontrol-bar"] move down $height px
